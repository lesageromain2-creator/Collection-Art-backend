# ============================================
# CONFIGURATION BACKEND - ASSOCIATION JOURNALISME
# Collection Aur'art
# ============================================

# ============================================
# DATABASE - SUPABASE POSTGRESQL
# ============================================
# Si erreur "password authentication failed for user postgres" → voir backend/DATABASE_CONNECTION_FIX.md
#
# Récupérez DATABASE_URL dans Supabase : Settings → Database
# 1. Database password : notez-le (ou Reset si oublié)
# 2. Connection string → URI : copiez l'URL et remplacez [YOUR-PASSWORD] par le mot de passe
# 3. Caractères spéciaux dans le mot de passe : encodez en URL (@ → %40, # → %23, etc.)
#
DATABASE_URL=postgresql://postgres.hbovwpxulsgeiimlrwkh:yotoTrKiopNlm45KK124MMM@aws-1-eu-west-1.pooler.supabase.com:6543/postgres

# Exemple (remplacer le mot de passe) :
# DATABASE_URL=postgresql://postgres:MonMotDePasse@db.abcdefghijklmno.supabase.co:5432/postgres

# ============================================
# JWT AUTHENTICATION
# ============================================
# Secret pour signer les tokens JWT
# ⚠️ Générez un secret sécurisé avec : openssl rand -base64 32
JWT_SECRET=4748a0809a94c963aa418405a373982c0c4004561ef9db7f18d9b34e22262d37
JWT_EXPIRES_IN=7d

# ============================================
# SERVER
# ============================================
PORT=5000
NODE_ENV=development

# ============================================
# CORS - Origines autorisées
# ============================================
# Séparez les origines par des virgules. Les URLs *.vercel.app sont déjà autorisées par pattern.
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001,https://votre-domaine.vercel.app

# ============================================
# EMAIL SERVICE (OPTIONNEL)
# ============================================
# Provider : 'smtp' ou 'resend'
EMAIL_PROVIDER=smtp

# --- SMTP Configuration (Gmail, SendGrid, etc.) ---
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=votre-email@gmail.com
SMTP_PASS=votre-mot-de-passe-application

# --- OU Resend (service recommandé) ---
# RESEND_API_KEY=re_votre_api_key

# Email expéditeur
EMAIL_FROM=contact@aurart.com
EMAIL_FROM_NAME=Collection Aur'art

# ============================================
# CLOUDINARY (UPLOAD D'IMAGES) — REQUIS pour articles et avatar
# ============================================
# Sans ces variables, l'upload d'images (couverture article, images dans l'article, photo de profil) échouera.
# 1. Créez un compte gratuit sur https://cloudinary.com
# 2. Dashboard → API Keys : copiez Cloud name, API Key, API Secret
CLOUDINARY_CLOUD_NAME=votre-cloud-name
CLOUDINARY_API_KEY=votre-api-key
CLOUDINARY_API_SECRET=votre-api-secret

# ============================================
# RATE LIMITING
# ============================================
# Limites de requêtes par fenêtre
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ============================================
# SECURITY
# ============================================
# Activer les logs détaillés en dev
DEBUG_MODE=true

# URL du site frontend (pour les emails)
FRONTEND_URL=http://localhost:3000

# ============================================
# NOTES D'INSTALLATION
# ============================================
# 1. Copiez ce fichier : cp .env.example .env
# 2. Remplissez les valeurs ci-dessus
# 3. Importez le schéma SQL dans Supabase :
#    → Fichier : supabase/DATABASE_JOURNALISM.sql
# 4. Démarrez le serveur : npm run dev
# 5. Testez : http://localhost:5000/health
